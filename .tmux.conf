# On first run, install plugins with <prefix>-I, I.e., ctrl-a, capital i.

# solves a problem when tmux is installed with brew (https://github.com/tmux-plugins/tpm/issues/67)
set-environment -g PATH "/usr/local/bin:/bin:/usr/bin"

# power line
run-shell "powerline-daemon -q"
source "/Users/jesse.chilcott/Library/Python/2.7/lib/python/site-packages/powerline/bindings/tmux/powerline.conf"

################################################################################
# Declare plugings 
################################################################################
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'arcticicestudio/nord-tmux'

################################################################################
# General tmux configuration 
################################################################################
set -g default-terminal "screen-256color"

# theme shouldnt interfere with anything that isnt color
set -g @nord_tmux_show_status_content "0"

# TODO: All of this is less than ideal, and needs to be revisited.  Nord's tmux integration
# seems to want to manually define powerline plugins, which overrides the powerline config
# Most of this should be moved to powerlines config, but that isn't performing as I would like
set -g status-left "#[fg=black,bg=blue,bold] #S #[fg=blue,bg=black,nobold,noitalics,nounderscore]"
set -g window-status-format "#[fg=black,bg=brightblack,nobold,noitalics,nounderscore] #[fg=white,bg=brightblack]#I #[fg=white,bg=brightblack,nobold,noitalics,nounderscore] #[fg=white,bg=brightblack]#W #F #[fg=brightblack,bg=black,nobold,noitalics,nounderscore]"
set -g window-status-current-format "#[fg=black,bg=cyan,nobold,noitalics,nounderscore] #[fg=black,bg=cyan]#I #[fg=black,bg=cyan,nobold,noitalics,nounderscore] #[fg=black,bg=cyan]#W #F #[fg=cyan,bg=black,nobold,noitalics,nounderscore]"
set -g window-status-separator ""

# set windows to start from 1 rather than 0, increasing the likelyhood that the
# numbered windows will have keys near each other.
set -g base-index 1
setw -g pane-base-index 1

# Set notifications for terminal bells.  Useful for alerting when a process
# completes.  Use echo -e '\a' to trigger.
# set-window-option -g visual-bell off
# set-window-option -g bell-action other

# Automatically renumber windows after one has been closed
set -g renumber-windows on

# turn on mouse
setw -g mouse on

# so some fancier zsh plungs display correctly
set -g default-terminal xterm-256color

#set scrollback history to remember more lines
set -g history-limit 10000

# Set theme to nord
# run-shell "~/.tmux/plugins/nord-tmux/nord.tmux"
# run-shell "~/.tmux/plugins/nord-tmux/src/nord.conf"

################################################################################
# key bindings
################################################################################

# Add your local tmux config here
setw -g mode-keys vi

# remap prefix to Control + a
set -g prefix C-Space

# bind 'C-s C-s' to type 'C-s'
bind C-Space send-prefix
unbind C-Space

# reload config
bind r source-file ~/.tmux.conf

# Make 0 go to window # 10
bind 0 select-window -t :10

# Go to last window
bind-key C-a last-window

# vim style keys for splits and panes
bind-key v split-window -h
bind-key s split-window -v
bind-key h select-pane -L
bind-key j select-pane -D
bind-key k select-pane -U
bind-key l select-pane -R

################################################################################
# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
################################################################################
run -b '~/.tmux/plugins/tpm/tpm'
